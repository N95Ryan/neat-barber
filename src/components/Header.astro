---
import Navbar from "./Navbar.astro";
---

<header class="main-header">
  <Navbar />
</header>

<style>
  .main-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: rgba(42, 52, 42, 0.95);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
  }

  .main-header.scrolled {
    background: rgba(42, 52, 42, 0.98);
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
  }

  /* Compensation pour le header fixe */
  body {
    padding-top: 80px;
  }

  @media (max-width: 991px) {
    body {
      padding-top: 70px;
    }
  }

  @media (max-width: 768px) {
    body {
      padding-top: 65px;
    }
  }

  @media (max-width: 576px) {
    body {
      padding-top: 60px;
    }
  }

  @media (max-width: 480px) {
    body {
      padding-top: 55px;
    }
  }

  @media (max-width: 375px) {
    body {
      padding-top: 50px;
    }
  }
</style>

<script>
  // Gestion du header sticky avec effet de scroll
  (function () {
    const header = document.querySelector(".main-header");

    // Vérifier immédiatement la position de scroll
    function checkScroll() {
      const scrollTop =
        window.pageYOffset || document.documentElement.scrollTop;

      if (scrollTop > 50) {
        header?.classList.add("scrolled");
      } else {
        header?.classList.remove("scrolled");
      }
    }

    // Exécuter immédiatement
    checkScroll();

    // Écouter les événements de scroll
    window.addEventListener("scroll", checkScroll, { passive: true });

    // S'assurer que le header est visible au chargement
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", checkScroll);
    } else {
      checkScroll();
    }
  })();
</script>
