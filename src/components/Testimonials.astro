---
// Composant Témoignages

// Interface pour les témoignages
interface Testimonial {
  name: string;
  image: string;
  rating: number;
  content: string;
  date?: string;
}

// Témoignages par défaut
const testimonials: Testimonial[] = [
  {
    name: "Emma Johnson",
    image: "/images/author-1.jpg",
    rating: 5,
    content:
      "Excellente expérience chez Neat Barber ! Le coiffeur a vraiment pris le temps de comprendre ce que je voulais et le résultat est parfait. L'ambiance est détendue et professionnelle. Je recommande vivement !",
    date: "15 juin 2023",
  },
  {
    name: "Olivia Davis",
    image: "/images/author-2.jpg",
    rating: 5,
    content:
      "Service exceptionnel ! L'équipe est très accueillante et professionnelle. Ma coupe de cheveux est exactement comme je l'imaginais. L'attention aux détails est remarquable. Je reviendrai sans hésiter !",
    date: "3 juillet 2023",
  },
  {
    name: "Thomas Martin",
    image: "/images/author-1.jpg",
    rating: 5,
    content:
      "Première visite chez Neat Barber et je suis très satisfait ! L'équipe est compétente et l'ambiance est agréable. Ma barbe a été parfaitement taillée et ma coupe de cheveux est moderne. Prix raisonnables pour un service de qualité.",
    date: "28 août 2023",
  },
  {
    name: "Sophie Bernard",
    image: "/images/author-2.jpg",
    rating: 5,
    content:
      "Un salon de coiffure moderne avec une équipe très professionnelle. J'ai apprécié les conseils personnalisés et le soin apporté à chaque détail. Le résultat dépasse mes attentes. Je recommande !",
    date: "12 septembre 2023",
  },
];
---

<div class="testimonials-section py-24">
  <div class="testimonials-container">
    <div class="section-header">
      <h3
        class="section-subtitle text-neutral-500 text-sm font-medium tracking-wider uppercase mb-4 animate-fade-in-up"
      >
        Témoignages Clients
      </h3>
      <h2
        class="section-title text-4xl lg:text-5xl font-bold text-neutral-900 leading-tight mb-6 animate-fade-in-up"
      >
        Ce que disent nos clients
      </h2>
    </div>

    <div class="testimonials-carousel">
      <div class="swiper">
        <div class="swiper-wrapper">
          {
            testimonials.map((testimonial) => (
              <div class="swiper-slide">
                <div class="testimonial-card">
                  <div class="quote-icon">
                    <svg
                      width="48"
                      height="48"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M10 11H6C4.89543 11 4 10.1046 4 9V7C4 5.89543 4.89543 5 6 5H8C9.10457 5 10 5.89543 10 7V11ZM10 11V13C10 16.866 6.86599 20 3 20"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M20 11H16C14.8954 11 14 10.1046 14 9V7C14 5.89543 14.8954 5 16 5H18C19.1046 5 20 5.89543 20 7V11ZM20 11V13C20 16.866 16.866 20 13 20"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </div>

                  <div class="testimonial-content">
                    <p class="testimonial-text">{testimonial.content}</p>
                  </div>

                  <div class="testimonial-footer">
                    <div class="author-info">
                      <div class="author-img">
                        <img src={testimonial.image} alt={testimonial.name} />
                      </div>
                      <div class="author-details">
                        <h3 class="author-name">{testimonial.name}</h3>
                        {testimonial.date && (
                          <p class="testimonial-date">{testimonial.date}</p>
                        )}
                      </div>
                    </div>

                    <div class="rating">
                      {Array.from({ length: testimonial.rating }).map(() => (
                        <svg
                          class="star-icon"
                          fill="currentColor"
                          viewBox="0 0 20 20"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                      ))}
                    </div>
                  </div>
                </div>
              </div>
            ))
          }
        </div>

        <div class="swiper-pagination"></div>
      </div>
    </div>
  </div>
</div>

<script>
  // Initialiser Swiper pour les témoignages
  document.addEventListener("DOMContentLoaded", function () {
    // @ts-ignore
    if (typeof window.Swiper !== "undefined") {
      // @ts-ignore
      const testimonialSwiper = new window.Swiper(
        ".testimonials-section .swiper",
        {
          slidesPerView: 1,
          spaceBetween: 30,
          loop: true,
          autoplay: {
            delay: 5000,
            disableOnInteraction: false,
          },
          pagination: {
            el: ".testimonials-section .swiper-pagination",
            clickable: true,
          },
          breakpoints: {
            640: {
              slidesPerView: 1,
            },
            768: {
              slidesPerView: 2,
            },
            1024: {
              slidesPerView: 3,
            },
          },
        }
      );
    }
  });
</script>

<style>
  /* Section styling */
  .testimonials-section {
    background-color: #f9f9f9;
    position: relative;
  }

  /* Effet spécial derrière le titre "Témoignages Clients" */
  .section-subtitle {
    position: relative;
    display: inline-block;
  }

  .section-subtitle::before {
    content: "";
    position: absolute;
    top: 50%;
    left: -20px;
    transform: translateY(-50%);
    width: 10px;
    height: 10px;
    background-color: #171717;
    border-radius: 50%;
  }

  .section-subtitle::after {
    content: "";
    position: absolute;
    top: 50%;
    left: -15px;
    transform: translateY(-50%);
    width: 40px;
    height: 2px;
    background-color: #171717;
    z-index: -1;
  }

  .testimonials-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .section-header {
    text-align: center;
    margin-bottom: 4rem;
    position: relative;
  }

  /* Testimonial cards */
  .testimonial-card {
    background-color: #ffffff;
    border-radius: 1rem;
    padding: 2rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
    height: 100%;
    display: flex;
    flex-direction: column;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    min-height: 400px;
    border: 1px solid rgba(0, 0, 0, 0.05);
  }

  .testimonial-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
  }

  .testimonial-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(to right, #171717, #4b5563);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .testimonial-card:hover::before {
    opacity: 1;
  }

  /* Quote icon */
  .quote-icon {
    color: #e5e5e5;
    margin-bottom: 1.5rem;
    position: relative;
  }

  /* Testimonial content */
  .testimonial-content {
    flex-grow: 1;
    margin-bottom: 1.5rem;
  }

  .testimonial-text {
    color: #4b5563;
    font-size: 1.125rem;
    line-height: 1.6;
    font-style: italic;
  }

  /* Footer with author info */
  .testimonial-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: auto;
  }

  .author-info {
    display: flex;
    align-items: center;
  }

  .author-img {
    width: 3.5rem;
    height: 3.5rem;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid #e5e5e5;
    margin-right: 1rem;
    flex-shrink: 0;
  }

  .author-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .author-name {
    font-weight: 700;
    color: #171717;
    margin: 0;
    font-size: 1rem;
  }

  .testimonial-date {
    color: #6b7280;
    font-size: 0.875rem;
    margin: 0.25rem 0 0 0;
  }

  /* Rating */
  .rating {
    display: flex;
  }

  .star-icon {
    width: 1.25rem;
    height: 1.25rem;
    color: #f59e0b;
    margin-left: 0.25rem;
  }

  /* Swiper customization */
  .swiper-pagination {
    margin-top: 3rem;
    position: relative;
  }

  :global(.testimonials-section .swiper-pagination-bullet) {
    width: 10px;
    height: 10px;
    background: #d1d5db;
    opacity: 1;
    margin: 0 5px;
    transition: all 0.3s ease;
  }

  :global(.testimonials-section .swiper-pagination-bullet-active) {
    background: #171717;
    transform: scale(1.2);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .section-title {
      font-size: 2rem;
    }

    .testimonial-card {
      min-height: 380px;
    }
  }

  @media (max-width: 768px) {
    .testimonials-section {
      padding: 4rem 0;
    }

    .section-title {
      font-size: 1.75rem;
    }

    .testimonial-card {
      min-height: 350px;
      padding: 1.5rem;
    }

    .testimonial-text {
      font-size: 1rem;
    }
  }

  @media (max-width: 640px) {
    .section-header {
      margin-bottom: 2.5rem;
    }

    .testimonial-card {
      min-height: 300px;
    }
  }
</style>
