---
// Interface pour les services
interface Service {
  name: string;
  icon: string;
  description?: string;
}

// Services par défaut
const defaultServices: Service[] = [
  {
    name: "Coupe classique",
    icon: "/images/service-1.svg",
    description: "Style impeccable",
  },
  {
    name: "Coupe + shampoing",
    icon: "/images/service-2.svg",
    description: "Soin complet",
  },
  {
    name: "Taille de barbe",
    icon: "/images/service-3.svg",
    description: "Précision parfaite",
  },
  {
    name: "Contours",
    icon: "/images/ticker-icon.svg",
    description: "Finition soignée",
  },
  {
    name: "Serviette chaude",
    icon: "/images/ticker-icon.svg",
    description: "Détente ultime",
  },
  {
    name: "Soin de visage",
    icon: "/images/ticker-icon.svg",
    description: "Exfoliation premium",
  },
];

// Props du composant
interface Props {
  services?: Service[];
  speed?: number;
  className?: string;
}

const { services = defaultServices, speed = 20, className = "" } = Astro.props;
---

<div
  class={`services-ticker py-6 bg-neutral-100 overflow-hidden w-full ${className}`}
>
  <div class="relative h-20 flex items-center overflow-hidden w-full">
    <div
      class="animate-scroll flex items-center w-max"
      style={`animation-duration: ${speed}s;`}
    >
      <ul class="flex items-center w-max space-x-16 whitespace-nowrap">
        {
          services.map((service) => (
            <li class="flex-shrink-0 group">
              <div class="flex items-center space-x-4">
                <div class="w-12 h-12 flex items-center justify-center bg-neutral-800 rounded-full p-2 transition-all duration-300 group-hover:bg-neutral-900">
                  <img
                    src={service.icon}
                    alt=""
                    class="w-6 h-6 object-contain"
                  />
                </div>
                <div>
                  <span class="block text-neutral-900 font-bold text-xl leading-tight transition-all duration-300 group-hover:text-neutral-700">
                    {service.name}
                  </span>
                  {service.description && (
                    <span class="text-neutral-500 text-sm block mt-1">
                      {service.description}
                    </span>
                  )}
                </div>
              </div>
            </li>
          ))
        }
        {/* DUPLICATION pour effet infini */}
        {
          services.map((service) => (
            <li class="flex-shrink-0 group" aria-hidden="true">
              <div class="flex items-center space-x-4">
                <div class="w-12 h-12 flex items-center justify-center bg-neutral-800 rounded-full p-2 transition-all duration-300 group-hover:bg-neutral-900">
                  <img
                    src={service.icon}
                    alt=""
                    class="w-6 h-6 object-contain"
                  />
                </div>
                <div>
                  <span class="block text-neutral-900 font-bold text-xl leading-tight transition-all duration-300 group-hover:text-neutral-700">
                    {service.name}
                  </span>
                  {service.description && (
                    <span class="text-neutral-500 text-sm block mt-1">
                      {service.description}
                    </span>
                  )}
                </div>
              </div>
            </li>
          ))
        }
      </ul>
    </div>
  </div>
</div>

<style>
  /* Animation pause au survol */
  .services-ticker:hover .animate-scroll {
    animation-play-state: paused;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .services-ticker {
      height: auto;
    }

    .services-ticker ul {
      font-size: 1rem;
      gap: 1.5rem;
    }

    .services-ticker .relative {
      height: 5rem;
    }
  }
</style>
